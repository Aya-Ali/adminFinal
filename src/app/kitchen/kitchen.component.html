<!-- navbar  -->
<nav class="row fixed-top shadow p-2 align-items-center justify-content-end">
    <app-lang></app-lang>
    <div class="spinner-border text-danger" role="status" *ngIf="loading">
        <span class="sr-only">Loading...</span>
    </div>

    <div class="col-md-8 col-sm-7 col-7 d-flex align-items-center justify-content-md-end justify-content-between">

        <div class="px-2 py-1 bg-warning mx-2 text-white rounded " data-toggle="modal" data-target="#orderDetails"
            *ngIf=" (roleNumber=='1' || roleNumber=='2' || roleNumber=='3'|| roleNumber=='6'|| roleNumber=='9') && !functionalityDiv">
            <i class="fas fa-file-alt"></i>
        </div>
        <div class="px-2 py-1 bg-success mx-2 text-white rounded " data-toggle="modal" data-target="#totalPayment"
            *ngIf=" (roleNumber=='1' || roleNumber=='2' || roleNumber=='3' || roleNumber=='6'|| roleNumber=='9')">
            <i class="fas fa-dollar-sign"></i>
        </div>
        <div class="mx-2" *ngIf="(locationId == ' ' ) && (roleNumber=='1' || roleNumber=='2') && !functionalityDiv">
            <select name="restaurant" class="form-control bg-dark text-white"
                (change)="FilterLocation($event.target.value) "
                [class.d-none]="!(LocationsChoose ==' ' || LocationsChoose =='*' )">
                <option value="*">All</option>
                <option value="R" selected='true'>Restaurants</option>
                <option value="F">Food Control</option>
                <option value="RF">R+F</option>
                <option value="P">Banquet</option>
                <option value="A">Activites</option>
                <option value="S">Supermarket</option>
                <option value="null">Other</option>
            </select>
        </div>
        <div class="mx-2" *ngIf="(roleNumber=='6'|| roleNumber == '10') && !functionalityDiv">
            <select name="restaurant" class="form-control bg-dark text-white"
                (change)="FilterLocation($event.target.value) "
                [class.d-none]="!(LocationsChoose == ' ' || LocationsChoose =='*' )">
                <option value="R" selected='true'>Restaurants</option>
                <option value="P">Banquet</option>
            </select>
        </div>
        <div class="mx-2" *ngIf="(roleNumber=='9') && !functionalityDiv">
            <select name="restaurant" class="form-control bg-dark text-white"
                (change)="FilterLocation($event.target.value) "
                [class.d-none]="!(LocationsChoose == ' ' || LocationsChoose =='*' )">
                <option value="R" selected='true'>Restaurants</option>
                <option value="F">Food Control</option>
                <option value="P">Banquet</option>
            </select>
        </div>
        <div class="mx-2"
            *ngIf="(locationId == ' ' ) && (roleNumber=='1' || roleNumber=='2'|| roleNumber=='6' || roleNumber=='9'|| roleNumber=='10' ) && !functionalityDiv ">
            <select name="restaurant" class="form-control bg-dark text-white"
                (change)="selectOption($event.target.value)">
                <option value="*" selected='true'>All</option>
                <option *ngFor="let location of Locations" [value]="location.id">{{location.name}}</option>

            </select>
        </div>
        <div class="mx-2" *ngIf="!functionalityDiv">
            <select name="time" class="form-control w-100 bg-dark text-white"
                (change)="selectTime($event.target.value)">
                <option value="today" selected='true'>Today</option>
                <option value="yesterday">Yesterday</option>

            </select>
        </div>
        <button
            *ngIf="(roleNumber=='1' || roleNumber=='2'|| roleNumber=='3'|| roleNumber=='4'|| roleNumber=='5'|| roleNumber=='6' || roleNumber=='9'|| roleNumber == '10')"
            class="btn btn-sm rounded-pill nav-btn text-capitalize btn-effect" id="cart" data-toggle="modal"
            data-target="#foodInsight">
            <i class="far fa-clipboard"></i>
        </button>

        <div class="dropdown ">
            <button class="btn btn-sm mx-1 text-capitalize btn-danger dropdown-toggle" type="button"
                id="dropdownMenuButton" *ngIf="userData" data-toggle="dropdown" aria-haspopup="true"
                aria-expanded="false">
                {{userData.name}}
            </button>
            <div class="dropdown-menu nav-btn" aria-labelledby="dropdownMenuButton">

                <a class="dropdown-item text-white" (click)="logOut()">
                    LogOut</a>
            </div>
        </div>

    </div>
</nav>
<!-- end navbar -->
<!-- orderes -->
<div class="container-fluid text-white mt-5">

    <div class="row">
        <aside class="aside col-md-1 col-sm-2 col-2 d-flex flex-column">
            <!-- Logo -->
            <div class="logo text-uppercase text-white mb-3">
                <img [src]="logSrc" class="w-100 py-2" />
            </div>
            <!-- End Logo -->
            <!-- orders Menu -->
            <div class="c-item">
                <!-- change Category -->

                <!-- access admin,manager,waiter,captian -->
                <div class="text-center text-white aside-item mb-3" id="null"
                    (click)="onChangeShipping($event.target,'null')"
                    [ngClass]="(roleNumber=='3' || roleNumber=='4')?'active':''"
                    *ngIf="roleNumber=='1' || roleNumber=='2' || roleNumber == '9' || roleNumber=='3' || roleNumber=='4' || roleNumber=='6'|| roleNumber == '10'">
                    <i class="fas fa-hourglass-half p-2 rounded-circle"></i>
                    <span class="badge rounded badge-danger">{{TotalPending}}</span>
                    <h6 class="text-capitalize font-weight-lighter pt-1">
                        <span>
                            {{_langChange.Checkpinding}}
                        </span>

                    </h6>
                </div>
                <!-- access admin,manager,waiter,captian,kitchen -->
                <div class="text-center text-white aside-item mb-3" id="ordered"
                    (click)="onChangeShipping($event.target,'ordered')" [ngClass]="(roleNumber=='5')?'active':''"
                    *ngIf="roleNumber=='1' || roleNumber=='2' || roleNumber == '9'|| roleNumber=='3' || roleNumber=='4' || roleNumber=='5'|| roleNumber=='6'|| roleNumber == '10'">
                    <i class="fas fa-cart-arrow-down p-2 rounded-circle"></i>
                    <span class="badge rounded badge-danger">{{TotalOrdered}}</span>
                    <h6 class="text-capitalize font-weight-lighter pt-1">
                        <span>
                            {{_langChange.Checkorder}}
                        </span>

                    </h6>
                </div>
                <!-- access admin,manager,waiter,captian -->
                <div class="text-center text-white aside-item mb-3" id="packed"
                    (click)="onChangeShipping($event.target,'packed')"
                    *ngIf="roleNumber=='1' || roleNumber=='2' || roleNumber == '9'|| roleNumber=='3' || roleNumber=='4'|| roleNumber=='6'|| roleNumber == '10'">
                    <i class="fas fa-shopping-bag p-2 rounded-circle"></i>
                    <span class="badge rounded badge-danger">{{TotalPacked}}</span>
                    <h6 class="text-capitalize font-weight-lighter pt-1">

                        <span>
                            {{_langChange.Checkpacked}}
                        </span>
                    </h6>
                </div>
                <!-- access admin,manager,waiter,captian -->
                <div class="text-center text-white aside-item mb-3" id="delivered"
                    (click)="onChangeShipping($event.target,'delivered')"
                    [ngClass]="(roleNumber=='1' || roleNumber=='2'|| roleNumber=='6')?'active':''"
                    *ngIf="roleNumber=='1' || roleNumber=='2' || roleNumber == '9' || roleNumber=='3' || roleNumber=='4'|| roleNumber=='5'|| roleNumber=='6'|| roleNumber == '10'">
                    <i class="fas fa-shopping-cart p-2 rounded-circle"></i>
                    <span class="badge rounded badge-danger">{{TotalDelrivered}}</span>
                    <h6 class="text-capitalize font-weight-lighter pt-1">
                        <span>
                            {{_langChange.Checkdelivered}}
                        </span>
                    </h6>
                </div>
                <!-- access admin,manager,waiter,captian -->
                <div class="text-center text-white aside-item mb-3" id="kitchen2"
                    (click)="Functionality($event.target,Locations,sells)"
                    *ngIf="roleNumber=='1' ||  roleNumber=='2'||   roleNumber=='6' ||   roleNumber=='3'||   roleNumber=='4'||roleNumber=='5' || roleNumber=='9'|| roleNumber == '10'|| roleNumber == '11'|| roleNumber == '12'|| roleNumber == '13'|| roleNumber == '14'">
                    <i class="fas fa-shopping-cart p-2 rounded-circle"
                        [ngClass]="sellsKitchen!=undefined && sellsKitchen.length>0?'text-danger':'text-success'"></i>
                    <span class="badge rounded badge-danger">{{Totalktitchen2}}</span>
                    <h6 class="text-capitalize font-weight-lighter pt-1">
                        <span>
                            kitchen2
                        </span>
                    </h6>
                </div>
                <!-- access Finance admin,manager -->
                <!-- <div class="text-center text-white aside-item mb-3" [routerLink]="['/finance']"
                    routerLinkActive="active" *ngIf="roleNumber=='1' ||  roleNumber=='2'">
                    <i class="fas fa-dollar-sign p-2 rounded-circle"></i>
                    <h6 class="text-capitalize font-weight-lighter pt-1">
                        <span>
                            {{_langChange.Finance}}
                        </span>

                    </h6>
                </div> -->
                <!-- access Parties admin,manager -->
                <!-- <div class="text-center text-white aside-item mb-3" [routerLink]="['/parties']"
                    routerLinkActive="active" *ngIf="roleNumber=='1' ||  roleNumber=='2' || roleNumber=='9'">
                    <i class="fas fa-user-edit"></i>
                    <h6 class="text-capitalize font-weight-lighter pt-1">
                        <span>
                            {{_langChange.Parties}}
                        </span>

                    </h6>
                </div> -->
                <!-- access FB admin,manager -->
                <!-- <div class="text-center text-white aside-item mb-3" [routerLink]="['/sells']" routerLinkActive="active"
                    *ngIf="roleNumber=='1' ||  roleNumber=='2'|| roleNumber=='6'|| roleNumber == '9'">
                    <i class="fas fa-coins"></i>
                    <h6 class="text-capitalize font-weight-lighter pt-1">
                        <span>
                            Sells
                        </span>

                    </h6>
                </div> -->
                <!-- access FB Product admin,manager -->
                <!-- <div class="text-center text-white aside-item mb-3" [routerLink]="['/product']"
                    routerLinkActive="active"
                    *ngIf="roleNumber=='1' || roleNumber == '9' ||  roleNumber=='2'|| roleNumber=='6'">
                    <i class="fas fa-coins"></i>
                    <h6 class="text-capitalize font-weight-lighter pt-1">
                        <span>
                            Products
                        </span>

                    </h6>
                </div> -->
                <!-- access pos -->
                <!-- <div class="text-center text-white aside-item mb-3" [routerLink]="['/pos']" routerLinkActive="active"
                    *ngIf="roleNumber=='1'  || roleNumber == '9'">
                    <i class="fas fa-coins"></i>
                    <h6 class="text-capitalize font-weight-lighter pt-1">
                        <span>
                            pos
                        </span>
                    </h6>
                </div> -->
                <!-- access gw1 -->
                <!-- <div class="text-center text-white aside-item mb-3" [routerLink]="['/gw1']" routerLinkActive="active"
                    *ngIf="roleNumber=='1' || roleNumber=='2'" [attr.title]="_langChange.mw1">
                    <i class="fas fa-file"></i>
                    <h6 class="text-capitalize font-weight-lighter pt-1">
                        <span>gw1</span>
                    </h6>
                </div> -->
                <!-- access gw2 -->
                <!-- <div class="text-center text-white aside-item mb-3" [routerLink]="['/gw2']" routerLinkActive="active"
                    *ngIf="roleNumber=='1' || roleNumber=='2'" [attr.title]="_langChange.mw2">

                    <i class="fas fa-file"></i>
                    <h6 class="text-capitalize font-weight-lighter pt-1">
                        <span>gw2</span>
                    </h6>
                </div> -->
                <!-- access gw3 -->
                <!-- <div class="text-center text-white aside-item mb-3" [routerLink]="['/gw3']" routerLinkActive="active"
                    *ngIf="roleNumber=='1' || roleNumber=='2'" [attr.title]="_langChange.mw3">
                    <i class="fas fa-file"></i>
                    <h6 class="text-capitalize font-weight-lighter pt-1">
                        <span>gw3</span>
                    </h6>
                </div> -->
                <!-- access gw4 -->
                <!-- <div class="text-center text-white aside-item mb-3" [routerLink]="['/gw4']" routerLinkActive="active"
                    *ngIf="roleNumber=='1' || roleNumber=='2'" [attr.title]="_langChange.mw4">
                    <i class="fas fa-file"></i>
                    <h6 class="text-capitalize font-weight-lighter pt-1">
                        <span>gw4</span>
                    </h6>
                </div> -->
                <!-- access gw5 -->
                <!-- <div class="text-center text-white aside-item mb-3" [routerLink]="['/gw5']" routerLinkActive="active"
                    *ngIf="roleNumber=='1' || roleNumber=='2'" [attr.title]="_langChange.mw5">
                    <i class="fas fa-file"></i>
                    <h6 class="text-capitalize font-weight-lighter pt-1">
                        <span>gw5</span>
                    </h6>
                </div> -->
                <!-- access officer -->
                <!-- <div class="text-center text-white aside-item mb-3" [routerLink]="['/officer']"
                    routerLinkActive="active" *ngIf="roleNumber=='1' || roleNumber=='2'">
                    <i class="fas fa-file"></i>
                    <h6 class="text-capitalize font-weight-lighter pt-1">
                        <span>officer</span>
                    </h6>
                </div> -->


            </div>
            <!-- End Category Menu -->
        </aside>
        <!-- orders grid -->
        <div class="col-md-11 col-sm-10 col-10 mt-3 offset-md-1 offset-sm-2 offset-2" *ngIf="!functionalityDiv">
            <div class="grid" #grid *ngIf="sellsLoaded | async">
                <div class="grid-item float-left my-2 px-2 col-md-4 col-sm-6 col-6" #gridItem
                    *ngFor="let sell of sellsMarged; let i = index">
                    <div class="spikes">
                        <!-- tazzble name -->
                        <h5 class="card-title rounded-top bg-success py-3 px-2 text-white">
                            <span *ngIf="sell.res_table_name != null ;else tableName">

                                <span *ngIf="(sell.res_table_name|tableName) === 'table'">
                                    {{_langChange.table}}
                                </span>
                                <span *ngIf="(sell.res_table_name|tableName) === 'r'">
                                    {{_langChange.room}}
                                </span>
                                <span *ngIf="(sell.res_table_name|tableName) === 's'">
                                    {{_langChange.Chalet}}
                                </span>
                                <span *ngIf="((sell.res_table_name|tableName) != 's' && (sell.res_table_name|tableName) != 'r' && 
                                    (sell.res_table_name|tableName) != 'table')">
                                    {{(sell.res_table_name|tableName)}}
                                </span>


                                {{sell.res_table_name|replace}}
                            </span>
                            <ng-template #tableName>
                                <span>
                                    <!-- {{_langChange.table}} -->
                                    takeaway
                                </span>
                            </ng-template>
                        </h5>
                        <!--end table name -->
                        <div class="overflow-auto px-2 d-flex flex-wrap justify-content-between align-items-center"
                            *ngIf="sells != undefined">
                            <div class="shadow-lg my-2 rounded" *ngFor="let selldata of sell.data ;let i= index">
                                <div class="text-white rounded text-center "
                                    [ngClass]="(selldata|time) ? 'bg-danger':'bg-success'">
                                    <span class="d-block">
                                        <span
                                            *ngIf="(roleNumber=='1' || roleNumber=='2'|| roleNumber=='6'||roleNumber=='9' ||roleNumber=='10' ) && (Locations|filterRecipe:selldata.location_id) != undefined">
                                            {{(Locations|filterRecipe:selldata.location_id).name}}
                                        </span>

                                        <span class="d-flex justify-content-between">
                                            <span class="px-2 py-1 ">
                                                {{selldata.transaction_date|date:'shortTime'}}
                                            </span>

                                            <!-- invoice_no in frist array -->
                                            <span id="invoiceno" (click)="invoiceno(selldata.invoice_url)"
                                                data-toggle="modal" data-target="#invoice_no"
                                                class=" px-2 py-1  rounded-right "
                                                [ngClass]="(selldata|time) ?'bg-custom-red':'bg-custom'">
                                                {{selldata.invoice_no|replace}}
                                            </span>
                                        </span>
                                    </span>
                                </div>
                                <div class="p-2">
                                    <div *ngFor="let sellLine of selldata.sell_lines">
                                        <div class="d-flex align-items-center">
                                            <!-- get quantity -->
                                            <p class="quentity rounded-circle bg-success text-white text-center mx-2">
                                                {{sellLine.quantity}}
                                            </p>
                                            <!-- get product name -->
                                            <p class="sellName" #sellName (click)="throwElement($event,sellLine.id)"
                                                [id]="sellLine.id">
                                                <!-- get product name in english -->
                                                <span *ngIf="(product|filterRecipe:sellLine.product_id);else Exist">
                                                    <span *ngIf="lang =='en' || lang == null ; else recipeNameAr">
                                                        {{(product|filterRecipe:sellLine.product_id).product_custom_field1
                                                        }}
                                                        <!-- get product name in arabc if english dosent exsit  -->
                                                        <span
                                                            *ngIf="(product|filterRecipe:sellLine.product_id).product_custom_field1 == null || (product|filterRecipe:sellLine.product_id).product_custom_field1 == ''">
                                                            {{(product|filterRecipe:sellLine.product_id).name }}
                                                        </span>
                                                    </span>
                                                    <!-- get product name in arabic -->
                                                    <ng-template #recipeNameAr>
                                                        <span>{{(product|filterRecipe:sellLine.product_id).name
                                                            }}</span>
                                                    </ng-template>
                                                </span>
                                                <ng-template #Exist>
                                                    <span> order not exists</span>
                                                </ng-template>

                                                <span class="text-danger"
                                                    *ngIf="(variations|variationName:sellLine.variation_id)">

                                                    <span *ngIf="lang =='en' || lang == null ; else vartionNameAr">
                                                        {{((variations|variationName:sellLine.variation_id).name)|slice:0:((variations|variationName:sellLine.variation_id).name).indexOf("/")}}
                                                    </span>
                                                    <ng-template #vartionNameAr>
                                                        {{((variations|variationName:sellLine.variation_id).name)|slice:((variations|variationName:sellLine.variation_id).name).indexOf("/")+1}}
                                                    </ng-template>

                                                </span>
                                                <!-- get order Notes -->
                                                <span class="Note d-block text-warning">
                                                    {{sellLine.sell_line_note}}
                                                </span>
                                            </p>
                                        </div>

                                    </div>
                                    <!-- if array -->
                                    <div class="d-flex justify-content-between align-items-center">
                                        <!-- button chang status all roles Except manager and delivered type -->
                                        <button class="btn btn-danger text-capitalize"
                                            *ngIf="!(roleNumber =='2' || roleNumber == '9'|| roleNumber == '10'|| roleNumber == '6'  ) && typeStatus != 'delivered'"
                                            (click)="changeStatus(selldata,shipping_status)" [id]="selldata.id">
                                            <span>
                                                {{_langChange[shipping_status]}}
                                            </span>

                                        </button>
                                        <i data-toggle="modal" data-target="#checkedData"
                                            class="fas fa-clipboard-check text-success my-2 px-2 "
                                            *ngIf="(roleNumber =='1' || roleNumber=='2'|| roleNumber=='6'|| roleNumber=='9'|| roleNumber=='11') && typeStatus != null "
                                            (click)="listCheck($event.target.id)" [id]="selldata.delivered_to"></i>
                                        <!-- button chang status all roles Except manager and pending type -->
                                        <i *ngIf="!(roleNumber =='2' || roleNumber == '9'|| roleNumber == '10'|| roleNumber == '6'  ) && typeStatus == null"
                                            class="fas fa-trash-restore-alt text-danger custom-i" data-toggle="modal"
                                            data-target="#deleteOrder" (click)="cancleOrder(selldata.id)">
                                        </i>
                                        <!-- delivered type -->
                                        <span *ngIf="typeStatus == 'delivered'">
                                            {{_langChange[selldata.payment_status]}}
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
        <!-- kitchen grid -->
        <div class="col-md-11 col-sm-10 col-10 mt-3 offset-md-1 offset-sm-2 offset-2" *ngIf="functionalityDiv">
            <div class="grid2" #grid2 *ngIf="sellsKitchenLoaded | async">
                <div class="grid-item2 float-left my-2 px-2 col-md-4 col-sm-6 col-6" #gridItem2
                    *ngFor="let sell of sellsKitchen; let i = index">
                    <div class="spikes">
                        <div class="overflow-auto  d-flex flex-wrap justify-content-between align-items-center">
                            <div class="text-white rounded text-center w-100"
                                [ngClass]="
                                (sell.transaction_date|timeKitchen:'kitchen') == 'danger' ? 'bg-danger' : 
                                (sell.transaction_date|timeKitchen:'kitchen') == 'warning' ?'bg-warning' :'bg-success'">


                                <span class="d-flex justify-content-around">
                                    <span
                                        *ngIf="(roleNumber=='1' || roleNumber=='2'|| roleNumber=='6'||roleNumber=='9' ||roleNumber=='10' ) && (Locations|filterRecipe:sell.location_id) != undefined">
                                        {{(Locations|filterRecipe:sell.location_id).name}}

                                    </span>
                                    <span *ngIf="sell.res_table_name != null;else tableName">
                                        <span *ngIf="(sell.res_table_name|tableName) === 'table'">
                                            {{_langChange.table}}
                                        </span>
                                        <span *ngIf="(sell.res_table_name|tableName) === 'r'">
                                            {{_langChange.room}}
                                        </span>
                                        <span *ngIf="(sell.res_table_name|tableName) === 's'">
                                            {{_langChange.Chalet}}
                                        </span>
                                        <span *ngIf="((sell.res_table_name|tableName) != 's' && (sell.res_table_name|tableName) != 'r' && 
                                (sell.res_table_name|tableName) != 'table')">
                                            {{(sell.res_table_name|tableName)}}
                                        </span>


                                        {{sell.res_table_name|replace}}
                                    </span>
                                    <ng-template #tableName>
                                        <span>
                                            <!-- {{_langChange.table}} -->
                                            takeaway
                                        </span>
                                    </ng-template>

                                </span>
                                <span class="d-flex justify-content-between">
                                    <span class="px-2 py-1 ">
                                        {{(sell.transaction_date)|date:'dd/MM/yyyy h:mm a'}}
                                    </span>

                                    <!-- invoice_no in frist array -->
                                    <span class=" px-2 py-1  rounded-right" id="invoiceno"
                                        (click)="invoiceno(sell.invoice_url)" data-toggle="modal"
                                        data-target="#invoice_no"
                                        [ngClass]="
                                        ((sell.transaction_date)|timeKitchen:'kitchen') == 'danger' ? 'bg-custom-red' : 
                                        ((sell.transaction_date)|timeKitchen:'kitchen') == 'warning' ?'bg-custom-warning' :'bg-custom'">
                                        {{(sell.invoice_no)|replace}}
                                    </span>
                                </span>

                            </div>

                            <div class="my-2 px-2 w-100" *ngFor="let items of sell.sell_lines ;let i= index">
                                <!-- sell_lines array -->
                                <div class="p-2">
                                    <!-- if array -->
                                    <div class="d-flex align-items-center ">
                                        <!-- get quantity -->
                                        <p class="quentity rounded-circle bg-success text-white text-center mx-2">
                                            {{items.quantity}}
                                        </p>
                                        <!-- get product name -->
                                        <p class="sellName" #sellName *ngIf="product != undefined"
                                            (click)="throwElement($event,items.id)" [id]="items.id">
                                            <!-- get product name in english -->
                                            <span *ngIf="(product|filterRecipe:items.product_id);else Exist">
                                                <span *ngIf="lang =='en' || lang == null ; else recipeNameAr">
                                                    {{(product|filterRecipe:items.product_id).product_custom_field1
                                                    }}
                                                    <!-- get product name in arabc if english dosent exsit  -->
                                                    <span
                                                        *ngIf="(product|filterRecipe:items.product_id).product_custom_field1 == null || (product|filterRecipe:items.product_id).product_custom_field1 == ''">
                                                        {{(product|filterRecipe:items.product_id).name }}
                                                    </span>
                                                </span>
                                                <!-- get product name in arabic -->
                                                <ng-template #recipeNameAr>
                                                    <span>{{(product|filterRecipe:items.product_id).name
                                                        }}</span>
                                                </ng-template>
                                            </span>
                                            <ng-template #Exist>
                                                <span> order not exists</span>
                                            </ng-template>
                                            <span class="text-danger"
                                                *ngIf="(variations|variationName:items.variation_id)">
                                     
                                                <span *ngIf="lang =='en' || lang == null ; else vartionNameAr2">
                                                    {{((variations|variationName:items.variation_id).name)|slice:0:((variations|variationName:items.variation_id).name).indexOf("/")}}
                                                </span>
                                                <ng-template #vartionNameAr2>
                                                    {{((variations|variationName:items.variation_id).name)|slice:((variations|variationName:items.variation_id).name).indexOf("/")+1}}
                                                </ng-template>

                                            </span>
                                            <!-- get order Notes -->
                                            <span class="Note d-block text-warning">
                                                {{items.sell_line_note}}
                                            </span>
                                        </p>
                                    </div>

                                </div>


                                <!-- if array -->

                            </div>
                            <div class="d-flex justify-content-between w-100">
                                <i *ngIf="roleNumber =='1' || roleNumber=='3'|| roleNumber=='4'|| roleNumber=='5'|| roleNumber=='10'|| roleNumber=='12'|| roleNumber=='13'|| roleNumber=='14' "
                                    class="fas fa-check-double text-success my-2 px-2 "
                                    [ngClass]="
                                    (sell|timeKitchen:'kitchen2':userData.name) == 'success' ? 'text-success' : 'text-danger'"
                                    (click)="CheckedCorrect($event,sell,sell.shipping_status)" [id]="sell.id"></i>

                                <i *ngIf="roleNumber =='1' || roleNumber=='2'|| roleNumber=='6'|| roleNumber=='9'|| roleNumber=='11' "
                                    data-toggle="modal" data-target="#checkedData"
                                    class="fas fa-clipboard-check text-success my-2 px-2 "
                                    (click)="listCheck(sell.delivered_to)" [id]="sell.id"></i>
                            </div>

                        </div>
                    </div>
                    <div class="clearfix"></div>
                </div>

            </div>
            <!-- end  kitchen grid -->
        </div>
    </div>
    <!-- Modal foodInsight -->
    <div class="modal fade" id="foodInsight" data-backdrop="static" data-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="staticBackdropLabel">
                        {{_langChange.foodInsight}}
                    </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <i class="fas fa-print float-right my-2  text-white p-2 bg-info rounded" (click)="printData()"></i>
                    <i class="far fa-file-excel float-end my-2  text-white p-2 bg-info rounded"
                        (click)="exportThisWithParameter('table3','sheet')"></i>
                    <table class="table table-striped table-bordered" #table3 id="table3" border="1" width="100%"
                        style="border-collapse: collapse;">
                        <thead class="thead-dark">
                            <tr>
                                <th>Food</th>
                                <th>Quantity</th>
                            </tr>
                        </thead>
                        <tbody *ngIf="orderQuantity">
                            <tr *ngFor="let item of orderQuantity">
                                <td>
                                    <span *ngIf="(product|filterRecipe:item.id);else Exist3">
                                        <span *ngIf="lang =='en' || lang == null ; else recipeNameAr">
                                            {{(product|filterRecipe:item.id).product_custom_field1 }}
                                            <span
                                                *ngIf="(product|filterRecipe:item.id).product_custom_field1 == null || (product|filterRecipe:item.id).product_custom_field1 == ''">
                                                {{(product|filterRecipe:item.id).name
                                                }}
                                            </span>
                                        </span>
                                        <ng-template #recipeNameAr>
                                            <span>{{(product|filterRecipe:item.id).name }}</span>
                                        </ng-template>
                                    </span>
                                    <ng-template #Exist3>
                                        <span> Order not exists</span>
                                    </ng-template>
                                    <span class="text-danger" *ngIf="(variations|variationName:item.variation_id)">
                                       
                                        <span *ngIf="lang =='en' || lang == null ; else vartionNameAr3">
                                            {{((variations|variationName:item.variation_id).name)|slice:0:((variations|variationName:item.variation_id).name).indexOf("/")}}
                                        </span>
                                        <ng-template #vartionNameAr3>
                                            {{((variations|variationName:item.variation_id).name)|slice:((variations|variationName:item.variation_id).name).indexOf("/")+1}}
                                        </ng-template>
                                    </span>
                                </td>
                                <td>{{item.qunt}}</td>

                            </tr>

                        </tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary"
                        data-dismiss="modal">{{_langChange.cancelClose}}</button>
                </div>
            </div>
        </div>
    </div>
    <!-- end Modal -->


    <!-- Modal totalPayment -->
    <div class="modal fade" id="totalPayment" data-backdrop="static" data-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="staticBackdropLabel">
                        {{_langChange.totalPayment}}
                    </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="d-flex">
                        <!-- Total Orders <span class="badge rounded badge-danger">{{totalSells}}</span> -->
                        <h5>Total Orders</h5>
                        <h5 class="ml-3 font-weight-bolder">{{totalSells}}</h5>
                    </div>
                    <table class="table table-striped table-bordered" id="table" data-show-print="true">
                        <thead class="thead-dark">
                            <th data-field="type">Type</th>
                            <th data-field="total">Total</th>
                        </thead>
                        <tbody *ngIf="sells">
                            <tr *ngFor="let item of sellPayments">
                                <td>
                                    {{item.type}}
                                </td>
                                <td>{{item.totalBeforTax| number}}</td>
                            </tr>
                            <tr>
                                <td>Total Before Tax</td>
                                <td>{{totalBeforTax| number}}</td>
                            </tr>
                            <tr>
                                <td>Total 15%</td>
                                <td>{{total3| number}}</td>
                            </tr>
                            <tr>
                                <td>Total 25%</td>
                                <td>{{total4| number}}</td>
                            </tr>
                            <tr>
                                <td>Discount</td>
                                <td>{{discount_amount| number}}</td>
                            </tr>

                            <tr class="bg-danger text-white">
                                <td>Total</td>
                                <td>{{totalAmount| number}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary"
                        data-dismiss="modal">{{_langChange.cancelClose}}</button>
                </div>
            </div>
        </div>
    </div>
    <!-- end Modal -->

    <!--  delete order -->
    <div class="modal fade" id="deleteOrder" data-backdrop="static" data-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">

                <div class="modal-body  text-capitalize text-center">
                    <i class="fas fa-times close-icon fa-4x text-danger  border-danger rounded-circle p-2"></i>
                    <h5 class="modal-title my-4 font-weight-bold" id="staticBackdropLabel">
                        {{_langChange.cancelsure}}</h5>
                    <p class="text-muted">{{_langChange.cancelParagraph}}</p>
                </div>
                <div class="modal-footer border-0">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">
                        {{_langChange.cancelClose}}</button>
                    <button type="button" class="btn btn-danger" (click)="confirmCancel()">
                        {{_langChange.cancelBtn}}</button>
                </div>
            </div>
        </div>
    </div>
    <!-- end delete order -->


    <!-- Modal Order Details -->
    <div class="modal fade" id="orderDetails" data-backdrop="static" data-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="staticBackdropLabel">
                        {{_langChange.orderDetails}}
                    </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="d-flex">
                        <!-- Total Orders <span class="badge rounded badge-danger">{{totalSells}}</span> -->
                        <h5>Total Orders</h5>
                        <h5 class="ml-3 font-weight-bolder">{{totalSells}}</h5>
                    </div>

                    <table class="table table-striped table-bordered" id="table2" data-show-print="true">
                        <thead class="thead-dark">
                            <th data-field="type">Type</th>
                            <th data-field="total">Total</th>
                        </thead>
                        <tbody *ngIf="sells">
                            <tr>
                                <td>Order by staff</td>
                                <td>{{orderByStaff.length}}</td>
                            </tr>
                            <tr>
                                <td>Order by guest</td>
                                <td>{{orderByGuest.length}}</td>
                            </tr>
                            <tr>
                                <td>Order by cashier</td>
                                <td>{{orderByCashier.length}}</td>
                            </tr>
                            <!-- <tr>
                                <td>Cancelled</td>
                                <td>{{TotalCancelled}}</td>
                            </tr> -->

                            <tr class="bg-danger text-white">
                                <td>Total Orders</td>
                                <td>{{totalSells}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="modal-footer justify-content-between">
                    <p class="text-danger">Note:Number Of Cancelled Order = {{TotalCancelled}} </p>
                    <button type="button" class="btn btn-secondary"
                        data-dismiss="modal">{{_langChange.cancelClose}}</button>
                </div>
            </div>
        </div>
    </div>
    <!-- end Modal -->

    <!-- Modal Order checkedData -->
    <div class="modal fade" id="checkedData" data-backdrop="static" data-keyboard="false" tabindex="-1"
        aria-labelledby="checkedData" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="checkedData">
                        List Checked
                    </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="d-flex">
                        <!-- Total Orders <span class="badge rounded badge-danger">{{totalSells}}</span> -->
                        <h5>cheched List</h5>

                    </div>

                    <table class="table table-striped table-bordered" id="table2" data-show-print="true">
                        <thead class="thead-dark">
                            <th data-field="name">Name</th>
                            <th data-field="type">type</th>
                            <th data-field="time">Time</th>
                        </thead>
                        <tbody *ngIf="checkedData">
                            <tr *ngFor="let item of checkedData">
                                <td>{{item.name}}</td>
                                <td>{{item.type}}</td>
                                <td>{{item.time}}</td>
                            </tr>

                        </tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary"
                        data-dismiss="modal">{{_langChange.cancelClose}}</button>
                </div>
            </div>
        </div>
    </div>
    <!-- end Modal -->
    <!-- Modal invoice_no -->
    <div class="modal fade " id="invoice_no" tabindex="-1" aria-labelledby="invoice_no" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="invoice_no">
                        Invoice No
                    </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body vh-100">
                    <iframe class="w-100 h-100" [src]="invoiceNoUrl" frameborder="0"></iframe>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary"
                        data-dismiss="modal">{{_langChange.cancelClose}}</button>
                </div>
            </div>
        </div>
    </div>
    <!-- end Modal -->

    <!-- alert audio -->
    <audio #audio>
        <source src="assets/done.mp3">
    </audio>
</div>